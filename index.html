<div>
    <h1>Scan QR code</h1>

    <video autoplay style="width: 300px; height: 300px; background-color: cadetblue;"></video>
    <script>
        async function initCamera() {
            try {
                const devices = await navigator.mediaDevices.enumerateDevices();
                const hasCamera = devices.some(device => device.kind === 'videoinput');
                
                if (!hasCamera) {
                    alert("Камера не найдена на устройстве.");
                    return;
                }

                const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: false });
                const video = document.querySelector("video");
                video.srcObject = stream;
            } catch (error) {
                console.log("Ошибка при доступе к камере:", error);
                alert("Не удалось получить доступ к камере.");
            }
        }

        document.addEventListener("DOMContentLoaded", () => {
            initCamera();
        });
    </script>
</div>
